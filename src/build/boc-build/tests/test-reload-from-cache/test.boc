include ../test.boc;

cp testproject.json $(TESTSUITE_DIR)/testproject.json;
pushd $(TESTSUITE_DIR);

echo "==== initial run ====" >> $(RAW_OUTPUT);
$(BOC_BUILD) --do-nothing --override-root-name testproject.json 2>>$(RAW_OUTPUT);

echo "==== clean run ====" >> $(RAW_OUTPUT);
$(BOC_BUILD) --do-nothing --override-root-name testproject.json 2>>$(RAW_OUTPUT);

echo "==== modified run ====" >> $(RAW_OUTPUT);
sleep 1;
touch testproject.json;
$(BOC_BUILD) --do-nothing --override-root-name testproject.json 2>>$(RAW_OUTPUT);

popd;

call process_raw_output();
call compare_output();
